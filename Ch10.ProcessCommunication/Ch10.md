# Ch10 进程间通信简介

## 10.1 进程间通信简介

本章内容：大致了解，不需要深入。

系统中的每一个进程都有各自的地址空间，并且相互独立、隔离，每个进程都处于自己的地址空间中。

同一个进程之间的不同函数通信比较简单，如通过全局变量即可。

两个不同的进程之间要进行通信通常是比较难的，因为这两个进程处于不同的地址空间中。

## 10.2 进程间通信的机制

Linux继承了早期Unix（AT&T和BSD分别开发了不同的通信机制）的通信机制。

- UNIX IPC：管道、FIFO、信号；
- System V IPC：信号量、消息队列、共享内存；
- POSIX IPC：信号量、消息队列、共享内存；
- Socket IPC：基于 Socket 进程间通信。

## 10.3 管道和FIFO

把一个进程连接到另一个进程的数据流称为管道，管道被抽象成一个文件。

- 普通管道 pipe：通常有两种限制，一是单工，数据只能单向传输；二是只能在父子或者兄弟进程间使用；
- 流管道 s_pipe：去除了普通管道的第一种限制，为半双工，可以双向传输；只能在父子或兄弟进程间使用；
- 有名管道 name_pipe（FIFO）：去除了普通管道的第二种限制，并且允许在不相关（不是父子或兄弟关系）的进程间进行通讯。

## 10.4 信号

信号用于通知接收信号的进程有某种事件发生，所以可用于进程间通信。

## 10.5 消息队列

消息队列是消息的链表，存放在内核中并由消息队列标识符标识。

消息队列包括 POSIX 消息队列和 System V 消息队列。

## 10.6 信号量

信号量是一个计数器，它主要用于控制多个进程间或一个进程内的多个线程间对共享资源的访问，相当于内存中的标志，进程可以根据它判定是否能够访问某些共享资源，同时，进程也可以修改该标志，除了用于共享资源的访问控制外，还可用于进程同步。

## 10.7 共享内存

共享内存就是映射一段能被其它进程所访问的内存，这段共享内存由一个进程创建，但其它的多个进程都可以访问，使得多个进程可以访问同一块内存空间。

## 10.8 套接字

Socket 是一种 IPC 方法，是基于网络的 IPC 方法，允许位于同一主机（计算机）或使用网络连接起来的不同主机上的应用程序之间交换数据，说白了就是网络通信。

在一个典型的客户端/服务器场景中，应用程序使用 socket 进行通信的方式如下：
- 各个应用程序创建一个 socket。socket 是一个允许通信的“设备”，两个应用程序都需要用到它。
- 服务器将自己的 socket 绑定到一个众所周知的地址（名称）上使得客户端能够定位到它的位置。