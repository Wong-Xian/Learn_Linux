# 5.2 stat函数 {ignore=true}

stat命令的底层是调用stat()函数
stat()函数是Linux中的系统调用
可通过man 2 stat命令查看

``` c
// get file status.
#include<sys/types.h>
#include<sys/stat.h>
#include<unistd.h>

int stat(const char* path, struct stat* buf);
```
path指定了一个需要查看属性的文件
buf指向了一个记录文件属性的结构体
返回值：成功返回 0；失败返回-1，并设置 error。

**目录**
[toc]

## 5.2.1 struct stat结构体

struct stat 是内核定义的一个结构体，在<sys/stat.h>头文件中申明，所以可以在应用层使用，这个结构体中的所有元素加起来构成了文件的属性信息，结构体内容如下所示：

``` c
struct stat
{
    dev_t st_dev;           /* 文件所在设备的 ID */
    ino_t st_ino;           /* 文件对应 inode 节点编号 */
    mode_t st_mode;         /* 文件对应的模式 */
    nlink_t st_nlink;       /* 文件的硬链接数 */
    uid_t st_uid;           /* 文件所有者的用户 ID */
    gid_t st_gid;           /* 文件所有者的组 ID */
    dev_t st_rdev;          /* 设备号（指针对设备文件） */
    off_t st_size;          /* 文件大小（以字节为单位） */
    blksize_t st_blksize;   /* 文件内容存储的块大小 */
    blkcnt_t st_blocks;     /* 文件内容所占块数 */
    struct timespec st_atim;/* 文件最后被访问的时间 */
    struct timespec st_mtim;/* 文件内容最后被修改的时间 */
    struct timespec st_ctim;/* 文件状态最后被改变的时间 */
};
```

## 5.2.2 st_mode变量

st_mode 是 structstat 结构体中的一个成员变量，是一个 32 位无符号整形数据，该变量记录了文件的类型、文件的权限这些信息。

## 5.2.3 struct timespace结构体
## 5.2.4 练习