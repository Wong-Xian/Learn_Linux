# uboot

- 是裸机程序

- 有3种版本
    - uboot官方原版
    - 芯片厂商定制版
    - 开发板厂商定制版
- uboot的命令
  - help / ? 查看可使用的所有命令
  - bdinfo 查询板子的信息
  - printenv 输出环境变量信息
  - version 输出版本信息
- 环境变量修改命令
  - setenv 修改环境变量
    - 在DRAM中修改
    - 如果有空格， 要用单引号括起来
    - 也可用于新建环境变量
    - 删除环境变量，为其赋空值即可
  - saveenv 保存环境变量（保存回flash中）
- 内存操作命令
  - md
    - 显示内存值
    - 格式：md[.b/.w/.l] address [#nums]
    - .b以byte显示，.w以word显示，.l以long显示
    - address是要查看的内存的起始地址
    - [#nums]表示要查看的数据长度
  - nm
    - 修改指定地址内存值
    - 格式：nm[.b/.w/.l] address
  - mm
    - 连续修改内存值
  - mw
    - 使用指定数据填充一段内存
    - 格式：mw[.b/.w/.l] addr value [count]
  - cp
    - 拷贝命令，把一段内存中的数据拷贝到另一段内存，或从flash拷贝数据到DRAM中。
    - 格式：cp[.b/.w/.l] 源地址 目的地址 数量
  - cmp
    - 比较命令
    - 格式：cmp[.b/.w/.l] 地址1 地址2 比较长度
    - 只返回是否相等
- 网络操作命令
  - ping命令
    - 只能ping其他机器，但不能ping uboot
  - dhcp命令
    - 从路由器获取IP地址
  - nfs命令
    - Network File System 网络文件系统
    - 可在计算机之间通过网络共享资源
  - tftp命令
    - 作用同nfs，只是使用的协议不一样
- EMMC 和 SD 卡操作命令：mmc
  - mmc info：输出设备信息
  - mmc rescan：扫描开发板上所有mmc设备
  - mmc list：查看当前开发板共有多少mmc设备
  - mmc dev：切换当前mmc设备
  - mmc part：查看mmc分区情况
  - mmc read：读取mmc设备的数据
  - mmc write：把数据写到mmc设备中
  - mmc erase：擦除mmc指定的块
- FAT格式文件系统命令
  - fatinfo：查询指定 MMC 设备分区的文件系统信息
  - fatls：fatls 命令用于查询 FAT 格式设备的目录和文件信息
  - fstype：查看毛毛虫设备某个分区的文件系统格式
  - fatload：将指定的文件读取到DRAM中
  - fatwrite：将DRAM中的数据写到mmc中
- EXT 格式文件系统命令
  - ext2ls
  - ext4ls
  - ext2load
  - ext4load
- NAND 操作命令
  - 用的不是 NAND 版开发板，略过
- BOOT 操作命令 本质工作：引导Linux
  - bootz：（前提Linux镜像已经在DRAM中了）从DRAM中启动zImage镜像文件
  - bootm：类似bootz
  - boot：读取bootcmd环境变量来启动Linux
- 其他常用命令
  - reset 复位重启
  - go 跳转到指定地址执行程序
  - run 运行环境变量中定义的命令